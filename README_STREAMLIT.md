# 🎨 뮤직카우 Streamlit 대시보드

Python 기반 인터랙티브 데이터 분석 대시보드

## 📋 기능

### 인터랙티브 대시보드
- **요약 통계 카드 (4개)**
  - 총 주문 수
  - 평균 괴리율 (델타 표시)
  - 평균 수익률
  - 평균 유동성

- **인터랙티브 차트 (2개)**
  - 시그널 분포 (Plotly 도넛 차트)
  - 괴리율 분포 (Plotly 바 차트)

- **데이터 테이블 (4개 탭)**
  - 고수익률 Top 10
  - 저평가 Top 10
  - 고유동성 Top 10
  - 전체 데이터 (검색 기능)

### 필터링 기능
- 주문 타입 필터 (구매/판매)
- 시그널 필터 (다중 선택)
- 괴리율 범위 슬라이더
- 곡명/아티스트 검색

### 데이터 분석 기능
- 곡별 주문 수 Top 5
- 아티스트별 주문 수 Top 5
- 주문 상태 분포
- CSV 다운로드

## 🚀 실행 방법

### 1. Streamlit 앱 시작

```bash
streamlit run streamlit_app.py
```

### 2. 브라우저에서 자동 열림

기본 포트: **http://localhost:8501**

## 🎯 주요 특징

### 1. 인터랙티브 필터링
- 실시간 데이터 필터링
- 다중 조건 적용
- 즉각적인 차트 업데이트

### 2. 고급 시각화
- **Plotly 차트**: 확대, 축소, 호버 정보
- **그라디언트 테이블**: 값에 따른 색상 표시
- **반응형 레이아웃**: Wide 모드 지원

### 3. 데이터 탐색
- **검색 기능**: 곡명/아티스트 실시간 검색
- **정렬 기능**: 컬럼 클릭으로 정렬
- **CSV 다운로드**: 필터링된 데이터 내보내기

### 4. 자동 캐싱
- 1분 캐시 (ttl=60)
- 빠른 로딩 속도
- 효율적인 메모리 사용

## 📊 화면 구성

### 상단: 요약 통계
```
📊 총 주문 수  |  📈 평균 괴리율  |  💰 평균 수익률  |  💧 평균 유동성
  3,835개     |     9.20%      |     5.08%      |     24.7점
```

### 중간: 차트
```
🎯 시그널 분포 (도넛 차트)  |  📊 괴리율 분포 (바 차트)
```

### 하단: 데이터 테이블 (탭)
```
🔥 고수익률 Top 10  |  📉 저평가 Top 10  |  💧 고유동성 Top 10  |  📋 전체 데이터
```

### 사이드바: 필터
```
📊 필터 옵션
- 주문 타입 (구매/판매)
- 시그널 (다중 선택)
- 괴리율 범위 (슬라이더)
---
📅 마지막 업데이트
```

## 🎨 기술 스택

### Backend
- **Streamlit 1.28+**: Python 데이터 앱 프레임워크
- **Pandas**: 데이터 처리 및 분석
- **Plotly 5.17+**: 인터랙티브 차트

### 데이터 소스
- `data/processed/*_metrics.json` (최신 파일 자동 로드)

## 💡 사용 팁

### 1. 필터링
```python
# 사이드바에서 필터 조건 선택
- 주문 타입: 구매만 선택
- 시그널: 저평가, 저평가+유동성↓ 선택
- 괴리율: -50% ~ -10% 범위 설정
```

### 2. 데이터 정렬
- 테이블 컬럼 헤더 클릭으로 정렬
- 오름차순/내림차순 토글

### 3. CSV 다운로드
- "전체 데이터" 탭에서 다운로드 버튼 클릭
- 필터링된 데이터만 다운로드됨
- 파일명: `musicow_data_YYYYMMDD_HHMMSS.csv`

### 4. 차트 인터랙션
- **확대/축소**: 마우스 휠 또는 드래그
- **이동**: 클릭 앤 드래그
- **정보 보기**: 호버로 상세 정보 표시
- **리셋**: 더블 클릭

## 🔧 커스터마이징

### 페이지 설정
```python
st.set_page_config(
    page_title="🎵 뮤직카우 시장 분석",
    page_icon="🎵",
    layout="wide",              # 전체 너비 사용
    initial_sidebar_state="expanded"  # 사이드바 기본 열림
)
```

### 캐시 설정
```python
@st.cache_data(ttl=60)  # 60초 캐시
def load_latest_data():
    ...
```

### 차트 색상
```python
color_discrete_map={
    '저평가': '#10b981',
    '고평가': '#ef4444',
    '유동성↑': '#3b82f6',
    '유동성↓': '#f59e0b',
    '주의': '#dc2626',
    '보통': '#6b7280',
    '저평가, 유동성↓': '#059669'
}
```

## 🆚 Flask vs Streamlit 비교

| 특징 | Flask + Bootstrap | Streamlit |
|-----|------------------|-----------|
| 개발 시간 | 1시간 20분 | 40분 |
| 코드 라인 수 | ~400 라인 | ~350 라인 |
| 커스터마이징 | 높음 (HTML/CSS/JS) | 중간 (Python만) |
| 인터랙션 | 중간 | 높음 |
| 배포 난이도 | 중간 | 쉬움 |
| 학습 곡선 | 높음 | 낮음 |
| 실시간 필터 | 직접 구현 필요 | 기본 제공 |
| 차트 | Chart.js | Plotly |

## 🚀 배포

### Streamlit Cloud (무료)
```bash
# GitHub에 푸시 후
# streamlit.io에서 배포
```

### Docker
```dockerfile
FROM python:3.10
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
CMD ["streamlit", "run", "streamlit_app.py", "--server.port=8501", "--server.address=0.0.0.0"]
```

## 📝 개발 정보

### 개발 시간
- Streamlit 앱 구현: 30분
- Plotly 차트 통합: 10분
- **총 개발 시간**: 40분

### 성능
- 초기 로딩: ~1-2초
- 필터 업데이트: 즉시 (~100ms)
- 차트 렌더링: ~200ms

## 🔒 주의사항

- 1분 캐시로 데이터 자동 갱신
- 메모리 효율적인 데이터 로딩
- 대용량 데이터는 페이지네이션 권장

---

*Last Updated: 2025-10-06*
